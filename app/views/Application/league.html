#{extends 'main.html'/}

%{ System.out.println(new Date()); }%
<p> #{a @Application.index()}Home#{/a}</p>

#{if league != null} 
	#{set title: league.getDisplayName() /}
	<h1>${league.getDisplayName()}</h1>
		
	<table id="leagueTable">
		<tr>
			<td class="team">Team</td>
			<td>P</td>
			<td>W</td>
			<td>D</td>
			<td>L</td>
			<td>GF</td>
			<td>GA</td>
			<td>GD</td>
			<td>PTS</td>
			<td>Best possible position</td>
			<td>Worst possible position</td>
		</tr>
		#{list items:league.getTeamsByRank(), as:'team'}
		<tr>
			<td class="team">${team.getDisplayName()}</td> 
			<td>${league.getNumberOfFinishedGamesWithTeam(team)}</td>
			<td>${league.getWinsForTeam(team)}</td>
			<td>${league.getTiesForTeam(team)}</td>
			<td>${league.getLossesForTeam(team)}</td>
			<td>${league.getGoalsScoredBy(team)}</td>
			<td>${league.getGoalsConcededBy(team)}</span>
			<td>${league.getGoalDifferenceForTeam(team)}</span>
			<td>${league.getPointsForTeam(team)}</span>
			<td><span #{if league.isInLowerQualification(league.getBestPossibleRankForTeam(team))} class="belowQualification"#{/if}#{elseif league.isInUpperQualification(league.getBestPossibleRankForTeam(team))} class="upperQualification"#{/elseif}>${league.getBestPossibleRankForTeam(team)}</span></td>
			<td><span #{if league.isInLowerQualification(league.getWorstPossibleRankForTeam(team))} class="belowQualification"#{/if}#{elseif league.isInUpperQualification(league.getWorstPossibleRankForTeam(team))} class="upperQualification"#{/elseif}>${league.getWorstPossibleRankForTeam(team)}</span></td>
		</tr>
		#{/list}
	</div>
	
	<hr />
	
	<div class="normalText">
		#{if league.getGames() != null}
			<p>This season has ${league.getGames().size()} game#{if league.getGames().size() > 1}s#{/if}. ${league.getPlayedGames().size()} #{if league.getPlayedGames().size() > 1}are#{/if}#{else}are#{/else} played, 
			${league.getRemainingGames().size()} remain#{if league.getRemainingGames().size > 1}s#{/if}.</p>
			
			<ul>
			#{list items:league.getGames(), as:'game'}
				<li>
					${game.getTeams().get(0)} - ${game.getTeams().get(1)}
					#{if game.isPlayed()} 
						${game.getScores().get(0).getGoals()} - ${game.getScores().get(1).getGoals()}
					#{/if}
				</li>
			#{/list}		
			</ul>
			
		#{/if}
	</div>
#{/if}
#{else}
	<p class="errorMessage">League not found.</p>
#{/else}

%{ System.out.println(new Date()); }%